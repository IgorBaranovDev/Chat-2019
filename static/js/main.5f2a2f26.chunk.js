(window.webpackJsonpchat=window.webpackJsonpchat||[]).push([[0],{21:function(e,t,a){e.exports=a(42)},26:function(e,t,a){},27:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(10),i=a.n(c),o=a(15),l=a(2),r=a(3),m=a(5),u=a(4),g=a(1),h=a(6),d=(a(26),function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("header",{className:"header"},s.a.createElement("h1",{className:"header-text"},"Chat-RS school 2019")))}),b=(a(27),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={name:localStorage.getItem("login")||"Guest",value:localStorage.getItem("login")||"Guest"},a.handleChange=a.handleChange.bind(Object(g.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value}),this.setState({name:e.target.value})}},{key:"handleSubmit",value:function(){this.props.getLogin(this.state.name),localStorage.setItem("login","".concat(this.state.name))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{className:"input-user-name",type:"text",value:this.state.value,onChange:this.handleChange}),s.a.createElement("input",{className:"submit-user-name",type:"submit",value:"Change name",onClick:this.handleSubmit}))}}]),t}(n.Component)),p=a(20),f=(a(38),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"scrollToBottom",value:function(){p.animateScroll.scrollToBottom({containerId:"chat-list"})}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this.props.messages.map(function(e){return s.a.createElement("li",{key:e.id,className:"message"},s.a.createElement("p",{className:"text-message"},s.a.createElement("span",{className:"author-message"},e.from," "),e.message,s.a.createElement("span",{className:"time-message"},e.formTime)))});return s.a.createElement("ul",{className:"listMesseges",id:"chat-list"},e)}}]),t}(n.Component)),v=(a(39),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={messege:""},e.changeHandler=e.changeHandler.bind(Object(g.a)(e)),e.submitHandler=e.submitHandler.bind(Object(g.a)(e)),e}return Object(h.a)(t,e),Object(r.a)(t,[{key:"changeHandler",value:function(e){var t=e.target.value;this.setState({messege:t})}},{key:"submitHandler",value:function(e){e.preventDefault(),this.props.sendMessage(this.state.messege),this.setState({messege:""})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"send-message"},s.a.createElement("textarea",{className:"message-input",type:"text",value:this.state.messege,placeholder:"Type you messeage ...",ref:function(t){e.nameInput=t},onChange:this.changeHandler}),s.a.createElement("input",{className:"message-input-submit",type:"submit",value:"Submit",onClick:this.submitHandler}))}}]),t}(n.Component)),O=(a(40),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).socket="",e.state={messages:[],login:localStorage.getItem("login")||"user"},e.sendMessage=e.sendMessage.bind(Object(g.a)(e)),e.getLogin=e.getLogin.bind(Object(g.a)(e)),e}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=new WebSocket("ws://st-chat.shas.tel"),this.socket.onopen=function(){console.log("Connect!")},this.socket.onmessage=function(t){e.receiveMessages(t.data)},this.socket.onclose=function(e){console.log("code: ".concat(e.code,". reason: ").concat(e.reason))}}},{key:"sendMessage",value:function(e){this.socket.send(JSON.stringify({from:this.state.login,message:e}))}},{key:"receiveMessages",value:function(e){var t=JSON.parse(e).map(function(e){var t=e.from,a=e.message,n=e.id,s=e.time;return{from:t,message:a,id:n,formTime:new Date(s).toUTCString().slice(16,25)}});this.setState(function(e){var a=e.messages;return{messages:[].concat(Object(o.a)(a),Object(o.a)(t))}})}},{key:"getLogin",value:function(e){this.setState({login:e})||localStorage.getItem("login")}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(d,null),s.a.createElement("section",{className:"wrapper-login"},s.a.createElement(b,{getLogin:this.getLogin})),s.a.createElement("section",{className:"wrapper-messageList"},s.a.createElement(f,{messages:this.state.messages})),s.a.createElement("section",{className:"wrapper-chatInput"},s.a.createElement(v,{sendMessage:this.sendMessage})))}}]),t}(n.Component));a(41);i.a.render(s.a.createElement(O,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.5f2a2f26.chunk.js.map